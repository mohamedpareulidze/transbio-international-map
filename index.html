<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Transbio Graduate School - Partenaires Internationaux</title>
  
  <!-- Tailwind CSS -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  
  <!-- Custom Style -->
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      color: #333;
      background-color: #f8f8f8;
    }
    
    .section-title {
      font-size: 1.8rem;
      font-weight: 600;
      color: #004080;
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid rgba(0, 0, 0, 0.1);
    }
    
    .card {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }
    
    #map {
      height: 500px;
      width: 100%;
      border: 2px solid #ccc;
      border-radius: 8px;
      z-index: 1;
    }
    
    .filter-container {
      background-color: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .news-date {
      font-size: 0.8rem;
      color: #666;
      font-weight: 500;
    }
    
    .btn-primary {
      background-color: #004080;
      color: white;
      padding: 8px 15px;
      border-radius: 4px;
      font-weight: 500;
      display: inline-block;
      transition: background-color 0.3s ease;
    }
    
    .btn-primary:hover {
      background-color: #00305f;
    }
    
    footer {
      background-color: #004080;
      color: white;
    }
    
    @media print {
      .container {
        width: 100%;
        max-width: 100%;
      }
      
      #map {
        height: 400px;
        page-break-inside: avoid;
      }
      
      section {
        page-break-inside: avoid;
      }
    }
  </style>
</head>
<body class="min-h-screen flex flex-col">
  <!-- Header -->
  <header class="bg-blue-900 text-white">
    <div class="container mx-auto px-4 py-4 flex flex-col md:flex-row justify-between items-center">
      <div>
        <h1 class="text-2xl font-bold">Transbio Graduate School</h1>
        <p class="text-sm text-blue-200">L'excellence dans la recherche et l'éducation</p>
      </div>
      <nav class="mt-4 md:mt-0">
        <ul class="flex space-x-6">
          <li><a href="#map-section" class="hover:text-blue-200 font-medium">Carte des partenaires</a></li>
          <li><a href="#networks" class="hover:text-blue-200 font-medium">Réseaux</a></li>
          <li><a href="#international" class="hover:text-blue-200 font-medium">International</a></li>
          <li><a href="#studying-abroad" class="hover:text-blue-200 font-medium">Étudier à l'étranger</a></li>
          <li><a href="#news" class="hover:text-blue-200 font-medium">Actualités</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Hero Section -->
  <div class="bg-blue-800 text-white py-10">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold mb-4">Partenaires Internationaux</h2>
      <p class="text-xl mb-6">Découvrez notre réseau mondial de partenaires académiques et institutionnels</p>
      <p class="text-blue-200 max-w-3xl">Transbio Graduate School s'engage à construire des partenariats solides avec des institutions du monde entier pour offrir des possibilités d'échange et de collaboration pour nos étudiants, chercheurs et enseignants.</p>
    </div>
  </div>

  <!-- Main Content -->
  <main class="flex-grow">
    <div class="container mx-auto px-4 py-8">
      
      <!-- Map Section -->
      <section id="map-section" class="mb-16">
        <h2 class="section-title">Carte interactive des institutions partenaires</h2>
        <p class="mb-4">Explorez les partenariats internationaux de la Graduate School Transbio à travers le monde. Utilisez les filtres ci-dessous pour affiner votre recherche.</p>
        
        <!-- Nouvelle disposition avec filtres à gauche -->
        <div class="flex flex-col md:flex-row gap-6">
          <!-- Filtres à gauche -->
          <div class="w-full md:w-1/4">
            <div class="filter-container">
              <h3 class="text-lg font-medium text-blue-800 mb-4">Filtres</h3>
              
              <div class="mb-4">
                <label for="levelFilter" class="block text-sm font-medium text-gray-700 mb-1">Niveau du programme :</label>
                <select id="levelFilter" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                  <option value="">Tous</option>
                </select>
              </div>
              
              <div class="mb-4" id="programFilterContainer" style="display: none;">
                <label for="programFilter" class="block text-sm font-medium text-gray-700 mb-1">Programme spécifique :</label>
                <select id="programFilter" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                  <option value="">Tous</option>
                </select>
              </div>
              
              <div class="mb-4">
                <label for="relationFilter" class="block text-sm font-medium text-gray-700 mb-1">Type de relation :</label>
                <select id="relationFilter" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                  <option value="">Toutes</option>
                </select>
              </div>
              
              <div class="mb-4">
                <label for="agreementFilter" class="block text-sm font-medium text-gray-700 mb-1">Type d'accord :</label>
                <select id="agreementFilter" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                  <option value="">Tous</option>
                </select>
              </div>
              
              <div class="text-sm text-gray-600 mt-6">
                <p>La carte affiche tous nos partenariats actifs. Cliquez sur un marqueur pour voir plus de détails sur le partenariat.</p>
              </div>
            </div>
          </div>
          
          <!-- Carte à droite -->
          <div class="w-full md:w-3/4">
            <div id="map"></div>
          </div>
        </div>
      </section>

      <!-- Networks Section -->
      <section id="networks" class="mb-16">
        <h2 class="section-title">Réseaux</h2>
        <p class="mb-6">Des partenariats soigneusement sélectionnés et cultivés forment la base du partage des connaissances et de la coopération dans l'éducation et la formation, afin de fournir des services appropriés et de progresser dans la recherche et le développement.</p>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <div class="card bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-semibold text-blue-800 mb-3">Collaborations académiques</h3>
            <p class="text-gray-700 mb-4">Partenariats avec des universités de premier plan pour des échanges d'étudiants, de professeurs et de chercheurs.</p>
            <span class="text-sm font-medium text-blue-600">Plus de 150 partenaires académiques</span>
          </div>
          
          <div class="card bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-semibold text-blue-800 mb-3">Partenariats industriels</h3>
            <p class="text-gray-700 mb-4">Collaboration avec des entreprises et industries pour des projets de recherche appliquée et des stages.</p>
            <span class="text-sm font-medium text-blue-600">Plus de 75 partenaires industriels</span>
          </div>
          
          <div class="card bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-semibold text-blue-800 mb-3">Réseaux de recherche</h3>
            <p class="text-gray-700 mb-4">Participation à des consortiums de recherche internationaux dans divers domaines scientifiques.</p>
            <span class="text-sm font-medium text-blue-600">25 réseaux actifs</span>
          </div>
        </div>
      </section>

      <!-- International Section -->
      <section id="international" class="mb-16">
        <h2 class="section-title">International</h2>
        <p class="mb-6">Transbio Graduate School évolue dans un environnement international, travaille au-delà des frontières et intensifie la coopération avec des partenaires étrangers dans toutes les disciplines, tant pour le personnel que pour les étudiants.</p>
        
        <div class="bg-white p-6 rounded-lg shadow-md mb-6">
          <h3 class="text-xl font-semibold text-blue-800 mb-3">Notre vision internationale</h3>
          <p class="text-gray-700 mb-4">Nous utilisons les synergies résultant de la collaboration avec des établissements d'enseignement et de recherche du monde entier. En même temps, Transbio Graduate School valorise sa position régionale en tant que hub dans notre monde globalement connecté.</p>
          <p class="text-gray-700">Nous sommes convaincus que notre société a besoin de plus d'acteurs compétents et responsables, qui travaillent en réseau pour générer des connaissances et qui reconnaissent la diversité culturelle comme un avantage.</p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-semibold text-blue-800 mb-3">Programmes internationaux</h3>
            <ul class="list-disc pl-5 space-y-2 text-gray-700">
              <li>Programmes d'échange pour étudiants et chercheurs</li>
              <li>Écoles d'été internationales</li>
              <li>Programmes de double diplôme</li>
              <li>Ateliers et séminaires internationaux</li>
              <li>Projets de recherche collaboratifs</li>
            </ul>
          </div>
          
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-semibold text-blue-800 mb-3">Ressources</h3>
            <ul class="list-disc pl-5 space-y-2 text-gray-700">
              <li>Bureau des relations internationales</li>
              <li>Centre de compétences linguistiques</li>
              <li>Services d'accueil des étudiants internationaux</li>
              <li>Programmes de mentorat interculturel</li>
              <li>Ateliers de préparation à la mobilité internationale</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Studying Abroad Section -->
      <section id="studying-abroad" class="mb-16">
        <h2 class="section-title">Étudier et travailler à l'étranger</h2>
        <p class="mb-6">Transbio Graduate School encourage la mobilité des étudiants ainsi que la mobilité du personnel pour les enseignants, les collaborateurs scientifiques et les assistants, et pour le personnel technique et opérationnel pour des périodes limitées dans l'une de nos universités partenaires.</p>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-semibold text-blue-800 mb-4">Pour les étudiants</h3>
            <p class="text-gray-700 mb-4">Plusieurs possibilités s'offrent à vous pour étudier à l'étranger pendant votre parcours à Transbio Graduate School :</p>
            <ul class="list-disc pl-5 space-y-2 text-gray-700 mb-6">
              <li>Semestre d'échange</li>
              <li>Stages internationaux</li>
              <li>Projets de recherche</li>
              <li>Écoles d'été</li>
            </ul>
            <a href="#" class="btn-primary">En savoir plus</a>
          </div>
          
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-semibold text-blue-800 mb-4">Pour les chercheurs et le personnel</h3>
            <p class="text-gray-700 mb-4">Les opportunités de mobilité pour le personnel académique et administratif :</p>
            <ul class="list-disc pl-5 space-y-2 text-gray-700 mb-6">
              <li>Séjours de recherche</li>
              <li>Enseignement dans des universités partenaires</li>
              <li>Participation à des conférences internationales</li>
              <li>Formations professionnelles</li>
            </ul>
            <a href="#" class="btn-primary">En savoir plus</a>
          </div>
        </div>
        
        <div class="bg-blue-50 p-6 rounded-lg">
          <h3 class="text-xl font-semibold text-blue-800 mb-4">Témoignages d'étudiants</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-white p-4 rounded-lg shadow-sm">
              <p class="italic text-gray-700 mb-2">"Mon semestre à l'Université d'Édimbourg a été une expérience transformatrice qui m'a permis d'élargir mes horizons académiques et personnels."</p>
              <p class="font-medium">Marie L., étudiante en Master</p>
            </div>
            <div class="bg-white p-4 rounded-lg shadow-sm">
              <p class="italic text-gray-700 mb-2">"Mon stage de recherche à Stockholm a été déterminant pour mon projet professionnel et m'a ouvert de nombreuses portes."</p>
              <p class="font-medium">Thomas B., doctorant</p>
            </div>
          </div>
        </div>
      </section>

      <!-- News Section -->
      <section id="news" class="mb-16">
        <h2 class="section-title">Actualités et événements</h2>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
          <!-- News Column -->
          <div>
            <h3 class="text-xl font-semibold text-blue-800 mb-4">Dernières actualités</h3>
            
            <div class="space-y-6">
              <div class="bg-white p-5 rounded-lg shadow-md">
                <span class="news-date">15 Avril 2025</span>
                <h4 class="text-lg font-medium text-blue-900 mt-1 mb-2">Nouveau partenariat avec l'Université de Helsinki</h4>
                <p class="text-gray-700 mb-3">Transbio Graduate School est fière d'annoncer un nouveau partenariat stratégique avec l'Université de Helsinki pour des échanges d'étudiants et des projets de recherche conjoints.</p>
                <a href="#" class="text-blue-600 font-medium hover:underline">Lire la suite</a>
              </div>
              
              <div class="bg-white p-5 rounded-lg shadow-md">
                <span class="news-date">28 Mars 2025</span>
                <h4 class="text-lg font-medium text-blue-900 mt-1 mb-2">Succès du programme d'échange avec Edinburgh</h4>
                <p class="text-gray-700 mb-3">Le programme d'échange avec l'Université d'Edinburgh a attiré un nombre record d'étudiants cette année, avec des retours très positifs des participants.</p>
                <a href="#" class="text-blue-600 font-medium hover:underline">Lire la suite</a>
              </div>
              
              <div class="bg-white p-5 rounded-lg shadow-md">
                <span class="news-date">12 Mars 2025</span>
                <h4 class="text-lg font-medium text-blue-900 mt-1 mb-2">Projet de recherche collaboratif avec Stockholm</h4>
                <p class="text-gray-700 mb-3">Une équipe de chercheurs de Transbio a lancé un projet collaboratif avec l'Université de Stockholm sur l'étude des déterminants du choix alimentaire.</p>
                <a href="#" class="text-blue-600 font-medium hover:underline">Lire la suite</a>
              </div>
            </div>
          </div>
          
          <!-- Events Column -->
          <div>
            <h3 class="text-xl font-semibold text-blue-800 mb-4">Événements à venir</h3>
            
            <div class="space-y-6">
              <div class="bg-white p-5 rounded-lg shadow-md">
                <span class="news-date">20 Mai 2025</span>
                <h4 class="text-lg font-medium text-blue-900 mt-1 mb-2">Journée des partenaires internationaux</h4>
                <p class="text-gray-700 mb-3">Une journée dédiée à la présentation des opportunités d'échange et de collaboration avec nos institutions partenaires.</p>
                <p class="text-sm font-medium text-gray-600 mb-3">Campus de Besançon, Bâtiment A</p>
                <a href="#" class="btn-primary">S'inscrire</a>
              </div>
              
              <div class="bg-white p-5 rounded-lg shadow-md">
                <span class="news-date">15 Juin 2025</span>
                <h4 class="text-lg font-medium text-blue-900 mt-1 mb-2">Webinaire : Étudier à l'étranger</h4>
                <p class="text-gray-700 mb-3">Présentation des programmes d'échange et témoignages d'étudiants ayant participé à des mobilités internationales.</p>
                <p class="text-sm font-medium text-gray-600 mb-3">En ligne, 14h-16h</p>
                <a href="#" class="btn-primary">S'inscrire</a>
              </div>
              
              <div class="bg-white p-5 rounded-lg shadow-md">
                <span class="news-date">10 Juillet 2025</span>
                <h4 class="text-lg font-medium text-blue-900 mt-1 mb-2">École d'été internationale</h4>
                <p class="text-gray-700 mb-3">Une semaine intensive de cours et d'ateliers avec des intervenants internationaux sur les thématiques de la transition écologique.</p>
                <p class="text-sm font-medium text-gray-600 mb-3">Campus de Dijon, 10-17 juillet</p>
                <a href="#" class="btn-primary">S'inscrire</a>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <!-- Footer -->
  <footer class="py-8">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        <div>
          <h3 class="text-xl font-bold mb-4">Transbio Graduate School</h3>
          <p class="text-blue-200 mb-4">Une formation d'excellence pour les futurs chercheurs et professionnels dans le domaine des sciences du vivant.</p>
        </div>
        
        <div>
          <h4 class="font-bold mb-4">Contact</h4>
          <ul class="space-y-2 text-blue-200">
            <li>Bureau des Relations Internationales</li>
            <li>Campus de Besançon</li>
            <li>Email: <a href="mailto:international@transbio.edu">international@transbio.edu</a></li>
            <li>Tél: +33 3 81 XX XX XX</li>
          </ul>
        </div>
        
        <div>
          <h4 class="font-bold mb-4">Liens rapides</h4>
          <ul class="space-y-2">
            <li><a href="#map-section" class="text-blue-200 hover:text-white">Carte des partenaires</a></li>
            <li><a href="#networks" class="text-blue-200 hover:text-white">Réseaux</a></li>
            <li><a href="#international" class="text-blue-200 hover:text-white">International</a></li>
            <li><a href="#studying-abroad" class="text-blue-200 hover:text-white">Étudier à l'étranger</a></li>
            <li><a href="#news" class="text-blue-200 hover:text-white">Actualités</a></li>
          </ul>
        </div>
        
        <div>
          <h4 class="font-bold mb-4">Suivez-nous</h4>
          <div class="flex space-x-4">
            <a href="#" class="text-blue-200 hover:text-white">Twitter</a>
            <a href="#" class="text-blue-200 hover:text-white">LinkedIn</a>
            <a href="#" class="text-blue-200 hover:text-white">Facebook</a>
            <a href="#" class="text-blue-200 hover:text-white">Instagram</a>
          </div>
        </div>
      </div>
      
      <div class="mt-8 pt-6 border-t border-blue-700">
        <p class="text-center text-blue-200">© 2025 Transbio Graduate School. Tous droits réservés.</p>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  
  <script>
    // Initialiser la carte
    let map = L.map("map").setView([45, 3], 3);

    // Charger le fond de carte depuis CartoDB Voyager
    L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
      attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors © <a href="https://carto.com/attributions">CARTO</a>',
      subdomains: 'abcd',
      maxZoom: 20
    }).addTo(map);

    // Exemples d'autres styles de carte (décommentez pour utiliser) :
    // 1. CartoDB Positron (clair, moderne) :
    // L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
    //   attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors © <a href="https://carto.com/attributions">CARTO</a>',
    //   subdomains: 'abcd',
    //   maxZoom: 20
    // }).addTo(map);

    // 2. Stamen Toner (monochrome, contraste élevé) :
    // L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}{r}.png', {
    //   attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> — Map data © <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
    //   subdomains: 'abcd',
    //   maxZoom: 20
    // }).addTo(map);

    // 3. Mapbox (nécessite une clé API) :
    // L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
    //   attribution: '© <a href="https://www.mapbox.com/about/maps/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
    //   maxZoom: 18,
    //   id: 'mapbox/light-v10', // ou 'mapbox/dark-v10', 'mapbox/streets-v11', etc.
    //   accessToken: 'votre_clé_api_mapbox_ici'
    // }).addTo(map);

    let markers = [];
    let data = [];

    // Fonction pour charger les données CSV
    function loadMapData() {
      const csvData = `Related Program level,Related program name,Related Institution,Partner Institution,Partner country,Partner Country,Partner program,Relationship type,International agreeemnt,full_address,Latitude,Longitude
Master,Physiological and Psychological FOOd choice Determinants (P²FOOD),Institu Agro Dijon (IAD),University of Edinburgh,United Kingdom,Edinburgh,Food and Consumer Behavior,Teaching,Erasmus+,"University of Edinburgh, United Kingdom",55.944076,-3.188374
Master,Microbiology and Physicochemistry for food and wine Processes MP²,Institu Agro Dijon (IAD),Technical University of Munich,Germany,Munich,Food Chemistry and Microbiology,Teaching,Double degree,"Technical University of Munich, Germany",48.265506,11.669336
Master,"Biodiversité et Changements Anthropiques : écologie, évolution, gestion (BCA)",Université Bourgogne Europe (UBE),University of Helsinki,Finland,Helsinki,Ecology and Evolutionary Biology,Teaching,Student mobility,"University of Helsinki, Finland",60.226722,25.01767
Master,Archéologie du Bâti (parcours ArBa),Université Marie & Louis Pasteur (UMLP),University of Bologna,Italy,Bologna,Architectural Conservation,Teaching,Erasmus+,"University of Bologna, Italy",44.498289,11.354457
Master,"Archéologie, culture, territoires, environnement - Archéo-Géo-Sciences (parcours AGES )",Université Bourgogne Europe (UBE),University of Warsaw,Poland,Warsaw,Archaeological Heritage Management,Teaching,Erasmus Mundus,"University of Warsaw, Poland",52.209143,21.009485
Master,"Microbiologie, résistance antimicrobienne, génomique, épidémiologie (MAGE)",Université Marie & Louis Pasteur (UMLP),Karolinska Institute,Sweden,Stockholm,Antimicrobial Resistance Research,Teaching,Double degree,"Karolinska Institute, Sweden",59.21955,17.940055
Master,"Sédimentologie, Paléontologie, Géochimie, Géoressources (SP2G)",Université Bourgogne Europe (UBE),University of Lisbon,Portugal,Lisbon,Geosciences and Paleontology,Teaching,Student mobility,"University of Lisbon, Portugal",38.752538,-9.156846
Master,"Sol, Eau, Milieux, Environnement (SEME)",Université Bourgogne Europe (UBE),Wageningen University,Netherlands,Wageningen,Environmental Sciences,Teaching,Erasmus+,"Wageningen University, Netherlands",51.985445,5.663212
Master,"Qualité des Eaux, Sols et Traitements (QuEST)",Université Marie & Louis Pasteur,KU Leuven,Belgium,Leuven,Environmental Engineering,Teaching,Double degree,"KU Leuven, Belgium",50.805713,3.291537
Master,Biologie Intégrative et Interactions Plante-Microbe-Environnement (B2IPME),Université Bourgogne Europe (UBE),University of Tartu,Estonia,Tartu,Molecular Plant-Microbe Interactions,Teaching,Erasmus+,"University of Tartu, Estonia",58.381014,26.71956
Master,"Ecology Monitoring and Management of Ecosystems (EMME) (Ecologie, Diagnostic et Gestion des Ecosystèmes)",Université Marie & Louis Pasteur (UMLP),Lund University,Sweden,Lund,Environmental Management and Ecosystems,Teaching,Student mobility,"Lund University, Sweden",55.71265,13.210759
Master,M1 : Ingénierie de l'environnement et des territoires (IET),Université Marie & Louis Pasteur (UMLP),University of Vienna,Austria,Vienna,Environmental Engineering and Territorial Planning,Teaching,Erasmus+,"University of Vienna, Austria",48.213147,16.35997
Master,M2 : Gestion Durable de l'Environnement (GDE),Université Marie & Louis Pasteur (UMLP),University of Barcelona,Spain,Barcelona,Sustainable Environmental Management,Teaching,Double degree,"University of Barcelona, Spain",41.38686,2.163478
Master,Géologie Appliquée (3 G),Université Marie & Louis Pasteur (UMLP),Charles University,Czech Republic,Prague,Applied Geology and Geophysics,Teaching,Erasmus+,"Charles University, Czech Republic",50.086992,14.423714
Master,Behavioral and Digital Economics for Effective Management (BDEEM),Université Marie & Louis Pasteur (UMLP),University of Belgrade,Serbia,Belgrade,Behavioral Economics and Digital Transformation,Teaching,Erasmus Mundus,"University of Belgrade, Serbia",44.817965,20.450777
Master,International Master in Microbiology: For the Microbes,Université Bourgogne Europe (UBE),University of Copenhagen,Denmark,Copenhagen,Microbial Biotechnology,Teaching,Double degree,"University of Copenhagen, Denmark",55.68015,12.572327
Master,"Agroécologie : Agrosciences, Environnement, Territoire, Paysage, Forêt",Institu Agro Dijon (IAD),University of Rostock,Germany,Rostock,Sustainable Agriculture and Agroecology,Teaching,Erasmus+,"University of Rostock, Germany",54.088057,12.133285
Master,"Changement Climatique, Adaptation, Territoires (CCLIMAT)",Université Bourgogne Europe (UBE),University of Rostock,Germany,Rostock,Climate Adaptation and Spatial Planning,Teaching,Student mobility,"University of Rostock, Germany",54.0880573,12.1332854
Master,"Aide à la décision, Géomatique et Aménagement pour une Transition Écologique (AGATE)",Université Marie & Louis Pasteur (UMLP),University of Ljubljana,Slovenia,Ljubljana,Geomatics and Ecological Transition,Teaching,Double degree,"University of Ljubljana, Slovenia",46.074405,14.514146
Master,Dynamique et Conservation de la Biodiversité (DyCoB),Université Bourgogne Europe (UBE),University of Bucharest,Romania,Bucharest,Biodiversity Conservation and Ecology,Teaching,Erasmus+,"University of Bucharest, Romania",44.435644,26.100926
PhD,École Doctorale Environnement Santé(ED ES),"IAD, UBE, UMLP",Karolinska Institute,Sweden,Stockholm,Environmental Health Doctoral Program,Teaching,Erasmus Mundus,"Karolinska Institute, Sweden",59.21955,17.940055
PhD,"École Doctorale Droit, Gestion, Economie et Politique ED DGEP)","IAD, UBE, UMLP",University of Bologna,Italy,Bologna,Economics and Political Science Doctorate,Teaching,Double degree,"University of Bologna, Italy",44.498289,11.354457
PhD,"École Doctorale Sociétés, espace, pratiques, temps (ED SEPT)","IAD, UBE, UMLP",University of Vienna,Austria,Vienna,Social Sciences and Spatial Planning,Teaching,Erasmus+,"University of Vienna, Austria",48.213147,16.35997
PhD,École Doctorale Carnot Pasteur (ED CP),"IAD, UBE, UMLP",ETH Zürich,Switzerland,Zürich,Science and Technology Doctoral School,Teaching,Double degree,"ETH Zürich, Switzerland",47.413218,8.537491
Research,UMR 1347 Agro-Ecologie (AE),Université Bourgogne Europe (UBE),University of Rostock,Germany,Rostock,Agroecology Research,Research,Erasmus+,"University of Rostock, Germany",54.088057,12.133285
Research,UMR 6282 Biogéosciences (BGS),Université Marie & Louis Pasteur (UMLP),Charles University,Czech Republic,Prague,Biogeosciences Research,Research,Student mobility,"Charles University, Czech Republic",50.086992,14.423714
Research,UMR 1041 Centre d'Economie et de Sociologie Appliquée à l'Agriculture et aux Espaces Ruraux (CESAER),Institu Agro Dijon (IAD),University of Belgrade,Serbia,Belgrade,Agricultural Economics Research,Research,Erasmus+,"University of Belgrade, Serbia",44.817965,20.450777
Research,UMR 6265 Centre des Sciences du Goût et de l'Alimentation (CSGA),Université Bourgogne Europe (UBE),University of Copenhagen,Denmark,Copenhagen,Food Sensory Science,Research,Double degree,"University of Copenhagen, Denmark",55.68015,12.572327
Research,UMR 6249 Chrono-environnement (CE),Université Marie & Louis Pasteur (UMLP),University of Warsaw,Poland,Warsaw,Chronoenvironmental Research,Research,Erasmus+,"University of Warsaw, Poland",52.209143,21.009485
Research,UMR A 02.102 Procédés Alimentaires et Microbiologiques (PAM),Université Bourgogne Europe (UBE),University of Helsinki,Finland,Helsinki,Food Processing and Microbiology,Research,Erasmus Mundus,"University of Helsinki, Finland",60.226722,25.01767
Research,UMR 6049 Théoriser et Modéliser pour Aménager (ThéMA),Université Bourgogne Europe (UBE),University of Warsaw,Poland,Warsaw,Spatial Modeling and Planning,Research,Student mobility,"University of Warsaw, Poland",52.209143,21.009485
Research,EA 3190 Centre de REcherche sur les Stratégies Economiques (CRESE),Institu Agro Dijon (IAD),University of Barcelona,Spain,Barcelona,Economic Strategies Research,Research,Double degree,"University of Barcelona, Spain",41.38686,2.163478
Research,EA 7467 Laboratoire d'Economie de Dijon (LEDI),Université Marie & Louis Pasteur (UMLP),University of Belgrade,Serbia,Belgrade,Economic Research,Research,Erasmus+,"University of Belgrade, Serbia",44.817965,20.450777
Research,EA 7317 Centre de Recherche en Gestion des Organisations (CREGO),,University of Manchester,United Kingdom,Manchester,Organizational Management Research,Research,Erasmus+,"University of Manchester, United Kingdom",53.466023,-2.233086`;

      // Parse CSV data
      Papa.parse(csvData, {
        header: true,
        skipEmptyLines: true,
        complete: function(results) {
          data = results.data;
          console.log("Données chargées :", data);
          populateFilters(data);
          updateMap(data);
        },
        error: function(err) {
          console.error("Erreur lors du parsing CSV:", err);
        }
      });
    }

    // Fonction pour peupler les filtres
    function populateFilters(data) {
      const levels = new Set();
      const relations = new Set();
      const agreements = new Set();
      const programsByLevel = {};

      // Remplir les sets pour chaque filtre
      data.forEach(d => {
        if (d['Related Program level']) {
          levels.add(d['Related Program level']);
          if (!programsByLevel[d['Related Program level']]) {
            programsByLevel[d['Related Program level']] = new Set();
          }
          if (d['Related program name']) {
            programsByLevel[d['Related Program level']].add(d['Related program name']);
          }
        }
        if (d['Relationship type']) relations.add(d['Relationship type']);
        if (d['International agreeemnt']) agreements.add(d['International agreeemnt']);
      });

      console.log("Filtres disponibles - Niveau :", levels);
      console.log("Filtres disponibles - Relation :", relations);
      console.log("Filtres disponibles - Accord international :", agreements);

      fillSelect("levelFilter", levels);
      fillSelect("relationFilter", relations);
      fillSelect("agreementFilter", agreements);

      // Gérer l'affichage du filtre de programme spécifique
      const levelFilter = document.getElementById("levelFilter");
      const programFilterContainer = document.getElementById("programFilterContainer");
      const programFilter = document.getElementById("programFilter");

      levelFilter.addEventListener("change", () => {
        const selectedLevel = levelFilter.value;
        programFilter.innerHTML = '<option value="">Tous</option>';
        
        if (selectedLevel && programsByLevel[selectedLevel]) {
          programFilterContainer.style.display = 'block';
          Array.from(programsByLevel[selectedLevel]).sort().forEach(program => {
            const option = document.createElement("option");
            option.value = program;
            option.text = program;
            programFilter.appendChild(option);
          });
        } else {
          programFilterContainer.style.display = 'none';
        }
        updateMap(data);
      });
    }

    // Fonction pour remplir les options dans un select
    function fillSelect(id, values) {
      const select = document.getElementById(id);
      Array.from(values).sort().forEach(val => {
        if (val) {
          const option = document.createElement("option");
          option.value = val;
          option.text = val;
          select.appendChild(option);
        }
      });
    }

    // Mise à jour de la carte selon les filtres
    function updateMap(data) {
      markers.forEach(m => map.removeLayer(m));
      markers = [];

      const level = document.getElementById("levelFilter").value;
      const program = document.getElementById("programFilter").value;
      const relation = document.getElementById("relationFilter").value;
      const agreement = document.getElementById("agreementFilter").value;

      console.log("Filtres appliqués - Niveau :", level);
      console.log("Filtres appliqués - Programme :", program);
      console.log("Filtres appliqués - Relation :", relation);
      console.log("Filtres appliqués - Accord international :", agreement);

      const filtered = data.filter(d => {
        return (!level || d['Related Program level'] === level) &&
               (!program || d['Related program name'] === program) &&
               (!relation || d['Relationship type'] === relation) &&
               (!agreement || d['International agreeemnt'] === agreement) &&
               d.Latitude && d.Longitude;
      });

      console.log("Données filtrées :", filtered);

      filtered.forEach(d => {
        const lat = parseFloat(d.Latitude);
        const lng = parseFloat(d.Longitude);
        if (!isNaN(lat) && !isNaN(lng)) {
          const marker = L.marker([lat, lng]).addTo(map);
          marker.bindPopup(`
            <b>${d['Related program name']}</b><br>
            <b>Institution:</b> ${d['Related Institution']}<br>
            <b>Partenaire:</b> ${d['Partner Institution']}<br>
            <b>Pays:</b> ${d['Partner country']}<br>
            <b>Programme partenaire:</b> ${d['Partner program']}<br>
            <b>Type de relation:</b> ${d['Relationship type']}<br>
            <b>Accord:</b> ${d['International agreeemnt']}
          `);
          markers.push(marker);
        } else {
          console.warn("Coordonnées invalides pour le programme :", d);
        }
      });
    }

    // Écouter les changements des filtres pour mettre à jour la carte
    document.getElementById("levelFilter").addEventListener("change", () => updateMap(data));
    document.getElementById("programFilter").addEventListener("change", () => updateMap(data));
    document.getElementById("relationFilter").addEventListener("change", () => updateMap(data));
    document.getElementById("agreementFilter").addEventListener("change", () => updateMap(data));

    // Charger les données au chargement de la page
    window.addEventListener('DOMContentLoaded', loadMapData);
  </script>
</body>
</html>
